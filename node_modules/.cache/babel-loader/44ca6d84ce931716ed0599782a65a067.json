{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _jquery = require('jquery');\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _utils = require('../utils');\n\nvar _reactBootstrap = require('react-bootstrap');\n\nvar _searchBar = require('./search-bar');\n\nvar _searchBar2 = _interopRequireDefault(_searchBar);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar dotdotdot = require('../utils/dotdotdot')(_jquery2.default);\n\nvar is_mounted = false;\n\nvar VideoList = function (_React$Component) {\n  _inherits(VideoList, _React$Component);\n\n  function VideoList(props) {\n    _classCallCheck(this, VideoList);\n\n    var _this = _possibleConstructorReturn(this, (VideoList.__proto__ || Object.getPrototypeOf(VideoList)).call(this, props));\n\n    _this.state = {\n      master_video_list: _this.props.initial_video_list,\n      truncated_list: [],\n      filtered_video_list: _this.props.initial_video_list,\n      filter_applied: false,\n      fetching_page: false,\n      next_page_token: _this.props.next_page_token,\n      inner_video_list_container_height: _this.props.height ? _this.props.small_screen ? 160 : _this.props.height - 60 : 160\n    };\n    _this.initDotdotdot = _this.initDotdotdot.bind(_this);\n    _this.handleUpdateFilteredVideos = _this.handleUpdateFilteredVideos.bind(_this);\n    _this.handleScroll = _this.handleScroll.bind(_this);\n    return _this;\n  }\n\n  _createClass(VideoList, [{\n    key: 'initDotdotdot',\n    value: function initDotdotdot() {\n      var _this2 = this;\n\n      this.state.filtered_video_list.forEach(function (v) {\n        (0, _jquery2.default)('#' + v.id).dotdotdot({\n          ellipsis: '...',\n          wrap: 'letter',\n          height: 35,\n          watch: true,\n          tolerance: 0,\n          callback: function callback(is_trucated) {\n            var list = _this2.state.truncated_list;\n\n            if (is_mounted) {\n              _this2.setState({\n                truncated_list: is_trucated ? [].concat(_toConsumableArray(list), [v.id]) : list.filter(function (e) {\n                  return e != v.id;\n                })\n              });\n            }\n          }\n        });\n      });\n    }\n  }, {\n    key: 'handleUpdateFilteredVideos',\n    value: function handleUpdateFilteredVideos(videos, filter_applied) {\n      this.state.master_video_list.forEach(function (v) {\n        (0, _jquery2.default)('#' + v.id).trigger('destroy');\n      });\n\n      if (is_mounted) {\n        this.setState({\n          filtered_video_list: videos,\n          filter_applied: filter_applied\n        }, this.initDotdotdot);\n      }\n    }\n  }, {\n    key: 'handleScroll',\n    value: function handleScroll(e) {\n      var _this3 = this;\n\n      if (!this.state.fetching_page && this.state.next_page_token != null && !this.state.filter_applied) {\n        var _e$target = e.target,\n            scrollHeight = _e$target.scrollHeight,\n            scrollTop = _e$target.scrollTop;\n        var clientHeight = (0, _jquery2.default)('.inner-video-list-container')[0].clientHeight;\n\n        if (scrollHeight - scrollTop < clientHeight + 600) {\n          var _props = this.props,\n              api_key = _props.api_key,\n              playlist_id = _props.playlist_id;\n          this.setState({\n            fetching_page: true\n          });\n          (0, _utils.youTubeFetch)(playlist_id, api_key, this.state.next_page_token).then(function (result) {\n            if (is_mounted) {\n              var master_video_list = _this3.state.master_video_list;\n              master_video_list.forEach(function (v) {\n                (0, _jquery2.default)('#' + v.id) ? (0, _jquery2.default)('#' + v.id).trigger('destroy') : null;\n              });\n\n              _this3.setState({\n                next_page_token: result.nextPageToken,\n                master_video_list: [].concat(_toConsumableArray(master_video_list), _toConsumableArray(result.items)),\n                filtered_video_list: [].concat(_toConsumableArray(master_video_list), _toConsumableArray(result.items)),\n                fetching_page: false\n              }, _this3.initDotdotdot);\n            }\n          }).catch(function (e) {\n            console.log('ERROR IN SCROLL HANDLER : ', e);\n          });\n        }\n      }\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      is_mounted = true;\n      this.initDotdotdot();\n      (0, _jquery2.default)('.inner-video-list-container').on('scroll', this.handleScroll);\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prev_props) {\n      if (prev_props.small_screen != this.props.small_screen) {\n        this.state.master_video_list.forEach(function (v) {\n          (0, _jquery2.default)('#' + v.id).trigger('destroy');\n        });\n\n        if (is_mounted) {\n          this.initDotdotdot();\n          this.setState({\n            inner_video_list_container_height: this.props.small_screen ? 160 : this.props.height - 60\n          });\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      is_mounted = false;\n      (0, _jquery2.default)('.inner-video-list-container').off('scroll', this.handleScroll);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var _props2 = this.props,\n          handleChange = _props2.handleChange,\n          show_thumbnails = _props2.show_thumbnails,\n          current_video_id = _props2.current_video_id;\n      return _react2.default.createElement('div', null, _react2.default.createElement(_searchBar2.default, {\n        master_video_list: this.state.master_video_list,\n        handleUpdateFilteredVideos: this.handleUpdateFilteredVideos,\n        next_page_token: this.state.next_page_token,\n        api_key: this.props.api_key,\n        playlist_id: this.props.playlist_id\n      }), _react2.default.createElement('div', {\n        className: 'inner-video-list-container'\n      }, _react2.default.createElement('div', {\n        className: 'inner-video-list-scroll-area-container',\n        style: {\n          height: this.state.inner_video_list_container_height\n        }\n      }, this.state.filtered_video_list.map(function (v) {\n        var _ref = v.snippet.thumbnails ? v.snippet.thumbnails.default : 'http://img.youtube.com/vi/dXo0LextZTU/sddefault.jpg',\n            url = _ref.url;\n\n        var title = v.snippet.title;\n        var videoId = v.snippet.resourceId.videoId;\n        return _react2.default.createElement(_reactBootstrap.OverlayTrigger, {\n          id: v.id + '-overlay-id',\n          trigger: ['hover', 'focus'],\n          placement: (0, _jquery2.default)('body').width() >= 768 ? 'left' : 'top',\n          key: v.id,\n          overlay: _this4.state.truncated_list.find(function (e) {\n            return e == v.id;\n          }) ? _react2.default.createElement(_reactBootstrap.Popover, {\n            id: v.id + '-popover-id'\n          }, title) : _react2.default.createElement(_reactBootstrap.Popover, {\n            id: v.id + '-popover-id',\n            bsClass: 'hidden'\n          })\n        }, _react2.default.createElement('div', {\n          className: 'video-container',\n          onClick: function onClick() {\n            handleChange(videoId);\n          }\n        }, _react2.default.createElement('div', {\n          id: v.id,\n          className: 'title-container ' + (current_video_id == videoId ? ' current' : '')\n        }, show_thumbnails ? _react2.default.createElement('img', {\n          src: url\n        }) : null, title)));\n      }))));\n    }\n  }]);\n\n  return VideoList;\n}(_react2.default.Component);\n\nexports.default = VideoList;","map":{"version":3,"sources":["/Users/andela/space-invaders/node_modules/react-youtube-playlist/dist/components/video-list.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_react","require","_react2","_interopRequireDefault","_jquery","_jquery2","_utils","_reactBootstrap","_searchBar","_searchBar2","obj","__esModule","default","_toConsumableArray","arr","Array","isArray","arr2","from","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","dotdotdot","is_mounted","VideoList","_React$Component","_this","getPrototypeOf","state","master_video_list","initial_video_list","truncated_list","filtered_video_list","filter_applied","fetching_page","next_page_token","inner_video_list_container_height","height","small_screen","initDotdotdot","bind","handleUpdateFilteredVideos","handleScroll","_this2","forEach","v","id","ellipsis","wrap","watch","tolerance","callback","is_trucated","list","setState","concat","filter","e","videos","trigger","_this3","_e$target","scrollHeight","scrollTop","clientHeight","_props","api_key","playlist_id","youTubeFetch","then","result","nextPageToken","items","catch","console","log","componentDidMount","on","componentDidUpdate","prev_props","componentWillUnmount","off","render","_this4","_props2","handleChange","show_thumbnails","current_video_id","createElement","className","style","map","_ref","snippet","thumbnails","url","title","videoId","resourceId","OverlayTrigger","placement","width","overlay","find","Popover","bsClass","onClick","src","Component"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _jquery = require('jquery');\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _utils = require('../utils');\n\nvar _reactBootstrap = require('react-bootstrap');\n\nvar _searchBar = require('./search-bar');\n\nvar _searchBar2 = _interopRequireDefault(_searchBar);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar dotdotdot = require('../utils/dotdotdot')(_jquery2.default);\n\n\nvar is_mounted = false;\n\nvar VideoList = function (_React$Component) {\n  _inherits(VideoList, _React$Component);\n\n  function VideoList(props) {\n    _classCallCheck(this, VideoList);\n\n    var _this = _possibleConstructorReturn(this, (VideoList.__proto__ || Object.getPrototypeOf(VideoList)).call(this, props));\n\n    _this.state = {\n      master_video_list: _this.props.initial_video_list,\n      truncated_list: [],\n      filtered_video_list: _this.props.initial_video_list,\n      filter_applied: false,\n      fetching_page: false,\n      next_page_token: _this.props.next_page_token,\n      inner_video_list_container_height: _this.props.height ? _this.props.small_screen ? 160 : _this.props.height - 60 : 160\n    };\n\n    _this.initDotdotdot = _this.initDotdotdot.bind(_this);\n    _this.handleUpdateFilteredVideos = _this.handleUpdateFilteredVideos.bind(_this);\n    _this.handleScroll = _this.handleScroll.bind(_this);\n    return _this;\n  }\n\n  _createClass(VideoList, [{\n    key: 'initDotdotdot',\n    value: function initDotdotdot() {\n      var _this2 = this;\n\n      this.state.filtered_video_list.forEach(function (v) {\n        (0, _jquery2.default)('#' + v.id).dotdotdot({\n          ellipsis: '...',\n          wrap: 'letter',\n          height: 35,\n          watch: true,\n          tolerance: 0,\n          callback: function callback(is_trucated) {\n            var list = _this2.state.truncated_list;\n            if (is_mounted) {\n              _this2.setState({ truncated_list: is_trucated ? [].concat(_toConsumableArray(list), [v.id]) : list.filter(function (e) {\n                  return e != v.id;\n                }) });\n            }\n          }\n        });\n      });\n    }\n  }, {\n    key: 'handleUpdateFilteredVideos',\n    value: function handleUpdateFilteredVideos(videos, filter_applied) {\n      this.state.master_video_list.forEach(function (v) {\n        (0, _jquery2.default)('#' + v.id).trigger('destroy');\n      });\n      if (is_mounted) {\n        this.setState({ filtered_video_list: videos, filter_applied: filter_applied }, this.initDotdotdot);\n      }\n    }\n  }, {\n    key: 'handleScroll',\n    value: function handleScroll(e) {\n      var _this3 = this;\n\n      if (!this.state.fetching_page && this.state.next_page_token != null && !this.state.filter_applied) {\n        var _e$target = e.target,\n            scrollHeight = _e$target.scrollHeight,\n            scrollTop = _e$target.scrollTop;\n        var clientHeight = (0, _jquery2.default)('.inner-video-list-container')[0].clientHeight;\n\n\n        if (scrollHeight - scrollTop < clientHeight + 600) {\n          var _props = this.props,\n              api_key = _props.api_key,\n              playlist_id = _props.playlist_id;\n\n          this.setState({ fetching_page: true });\n          (0, _utils.youTubeFetch)(playlist_id, api_key, this.state.next_page_token).then(function (result) {\n            if (is_mounted) {\n              var master_video_list = _this3.state.master_video_list;\n\n              master_video_list.forEach(function (v) {\n                (0, _jquery2.default)('#' + v.id) ? (0, _jquery2.default)('#' + v.id).trigger('destroy') : null;\n              });\n              _this3.setState({\n                next_page_token: result.nextPageToken,\n                master_video_list: [].concat(_toConsumableArray(master_video_list), _toConsumableArray(result.items)),\n                filtered_video_list: [].concat(_toConsumableArray(master_video_list), _toConsumableArray(result.items)),\n                fetching_page: false\n              }, _this3.initDotdotdot);\n            }\n          }).catch(function (e) {\n            console.log('ERROR IN SCROLL HANDLER : ', e);\n          });\n        }\n      }\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      is_mounted = true;\n      this.initDotdotdot();\n      (0, _jquery2.default)('.inner-video-list-container').on('scroll', this.handleScroll);\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prev_props) {\n      if (prev_props.small_screen != this.props.small_screen) {\n        this.state.master_video_list.forEach(function (v) {\n          (0, _jquery2.default)('#' + v.id).trigger('destroy');\n        });\n\n        if (is_mounted) {\n          this.initDotdotdot();\n          this.setState({\n            inner_video_list_container_height: this.props.small_screen ? 160 : this.props.height - 60\n          });\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      is_mounted = false;\n      (0, _jquery2.default)('.inner-video-list-container').off('scroll', this.handleScroll);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var _props2 = this.props,\n          handleChange = _props2.handleChange,\n          show_thumbnails = _props2.show_thumbnails,\n          current_video_id = _props2.current_video_id;\n\n\n      return _react2.default.createElement(\n        'div',\n        null,\n        _react2.default.createElement(_searchBar2.default, {\n          master_video_list: this.state.master_video_list,\n          handleUpdateFilteredVideos: this.handleUpdateFilteredVideos,\n          next_page_token: this.state.next_page_token,\n          api_key: this.props.api_key,\n          playlist_id: this.props.playlist_id\n        }),\n        _react2.default.createElement(\n          'div',\n          { className: 'inner-video-list-container' },\n          _react2.default.createElement(\n            'div',\n            {\n              className: 'inner-video-list-scroll-area-container',\n              style: { height: this.state.inner_video_list_container_height }\n            },\n            this.state.filtered_video_list.map(function (v) {\n              var _ref = v.snippet.thumbnails ? v.snippet.thumbnails.default : 'http://img.youtube.com/vi/dXo0LextZTU/sddefault.jpg',\n                  url = _ref.url;\n\n              var title = v.snippet.title;\n              var videoId = v.snippet.resourceId.videoId;\n\n\n              return _react2.default.createElement(\n                _reactBootstrap.OverlayTrigger,\n                {\n                  id: v.id + '-overlay-id',\n                  trigger: ['hover', 'focus'],\n                  placement: (0, _jquery2.default)('body').width() >= 768 ? 'left' : 'top',\n                  key: v.id,\n                  overlay: _this4.state.truncated_list.find(function (e) {\n                    return e == v.id;\n                  }) ? _react2.default.createElement(\n                    _reactBootstrap.Popover,\n                    { id: v.id + '-popover-id' },\n                    title\n                  ) : _react2.default.createElement(_reactBootstrap.Popover, { id: v.id + '-popover-id', bsClass: 'hidden' })\n                },\n                _react2.default.createElement(\n                  'div',\n                  {\n                    className: 'video-container',\n                    onClick: function onClick() {\n                      handleChange(videoId);\n                    }\n                  },\n                  _react2.default.createElement(\n                    'div',\n                    {\n                      id: v.id,\n                      className: 'title-container ' + (current_video_id == videoId ? ' current' : '')\n                    },\n                    show_thumbnails ? _react2.default.createElement('img', { src: url }) : null,\n                    title\n                  )\n                )\n              );\n            })\n          )\n        )\n      );\n    }\n  }]);\n\n  return VideoList;\n}(_react2.default.Component);\n\nexports.default = VideoList;"]},"metadata":{},"sourceType":"script"}