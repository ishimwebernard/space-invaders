{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var gen = fn.apply(this, arguments);\n    return new Promise(function (resolve, reject) {\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          return Promise.resolve(value).then(function (value) {\n            step(\"next\", value);\n          }, function (err) {\n            step(\"throw\", err);\n          });\n        }\n      }\n\n      return step(\"next\");\n    });\n  };\n}\n\nrequire('isomorphic-fetch');\n\nrequire('es6-promise').polyfill();\n\nvar youTubeFetchFiltered = function () {\n  var _ref = _asyncToGenerator(_regenerator2.default.mark(function _callee(playlist_id, api_key, filter) {\n    var base_url, config, url, page_token, finished, filtered_videos, _loop, _ret;\n\n    return _regenerator2.default.wrap(function _callee$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            base_url = 'https://www.googleapis.com/youtube/v3';\n            config = {\n              method: 'GET',\n              mode: 'cors'\n            };\n            url = void 0, page_token = void 0;\n            finished = false;\n            filtered_videos = [];\n            _loop = _regenerator2.default.mark(function _loop() {\n              var result, result_json, regex;\n              return _regenerator2.default.wrap(function _loop$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      if (page_token) {\n                        url = base_url + '/playlistItems?&part=snippet&playlistId=' + playlist_id + '&pageToken=' + page_token + '&maxResults=50&key=' + api_key;\n                      } else {\n                        url = base_url + '/playlistItems?&part=snippet&playlistId=' + playlist_id + '&maxResults=50&key=' + api_key;\n                      }\n\n                      _context.next = 3;\n                      return fetch(url, config);\n\n                    case 3:\n                      result = _context.sent;\n\n                      if (!(result.status != 200)) {\n                        _context.next = 6;\n                        break;\n                      }\n\n                      return _context.abrupt('return', {\n                        v: Promise.reject(result.error)\n                      });\n\n                    case 6:\n                      _context.next = 8;\n                      return result.json();\n\n                    case 8:\n                      result_json = _context.sent;\n                      page_token = result_json.nextPageToken;\n\n                      if (page_token) {\n                        finished = true;\n                      }\n\n                      regex = new RegExp('' + filter, 'i');\n                      filtered_videos = [].concat(_toConsumableArray(filtered_videos), _toConsumableArray(result_json.items.filter(function (v) {\n                        return regex.test(v.snippet.title);\n                      })));\n\n                    case 13:\n                    case 'end':\n                      return _context.stop();\n                  }\n                }\n              }, _loop, undefined);\n            });\n\n          case 6:\n            if (!(!finished && filtered_videos.length < 1000)) {\n              _context2.next = 13;\n              break;\n            }\n\n            return _context2.delegateYield(_loop(), 't0', 8);\n\n          case 8:\n            _ret = _context2.t0;\n\n            if (!((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\")) {\n              _context2.next = 11;\n              break;\n            }\n\n            return _context2.abrupt('return', _ret.v);\n\n          case 11:\n            _context2.next = 6;\n            break;\n\n          case 13:\n            return _context2.abrupt('return', Promise.resolve(filtered_videos));\n\n          case 14:\n          case 'end':\n            return _context2.stop();\n        }\n      }\n    }, _callee, undefined);\n  }));\n\n  return function youTubeFetchFiltered(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexports.default = youTubeFetchFiltered;","map":{"version":3,"sources":["/Users/andela/space-invaders/node_modules/react-youtube-playlist/dist/utils/youtube-fetch-filtered.js"],"names":["Object","defineProperty","exports","value","_regenerator","require","_regenerator2","_interopRequireDefault","_typeof","Symbol","iterator","obj","constructor","prototype","__esModule","default","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_asyncToGenerator","fn","gen","apply","arguments","Promise","resolve","reject","step","key","arg","info","error","done","then","err","polyfill","youTubeFetchFiltered","_ref","mark","_callee","playlist_id","api_key","filter","base_url","config","url","page_token","finished","filtered_videos","_loop","_ret","wrap","_callee$","_context2","prev","next","method","mode","result","result_json","regex","_loop$","_context","fetch","sent","status","abrupt","v","json","nextPageToken","RegExp","concat","items","test","snippet","title","stop","undefined","delegateYield","t0","_x","_x2","_x3"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nrequire('isomorphic-fetch');\nrequire('es6-promise').polyfill();\n\nvar youTubeFetchFiltered = function () {\n  var _ref = _asyncToGenerator(_regenerator2.default.mark(function _callee(playlist_id, api_key, filter) {\n    var base_url, config, url, page_token, finished, filtered_videos, _loop, _ret;\n\n    return _regenerator2.default.wrap(function _callee$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            base_url = 'https://www.googleapis.com/youtube/v3';\n            config = {\n              method: 'GET',\n              mode: 'cors'\n            };\n            url = void 0, page_token = void 0;\n            finished = false;\n            filtered_videos = [];\n            _loop = _regenerator2.default.mark(function _loop() {\n              var result, result_json, regex;\n              return _regenerator2.default.wrap(function _loop$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      if (page_token) {\n                        url = base_url + '/playlistItems?&part=snippet&playlistId=' + playlist_id + '&pageToken=' + page_token + '&maxResults=50&key=' + api_key;\n                      } else {\n                        url = base_url + '/playlistItems?&part=snippet&playlistId=' + playlist_id + '&maxResults=50&key=' + api_key;\n                      }\n                      _context.next = 3;\n                      return fetch(url, config);\n\n                    case 3:\n                      result = _context.sent;\n\n                      if (!(result.status != 200)) {\n                        _context.next = 6;\n                        break;\n                      }\n\n                      return _context.abrupt('return', {\n                        v: Promise.reject(result.error)\n                      });\n\n                    case 6:\n                      _context.next = 8;\n                      return result.json();\n\n                    case 8:\n                      result_json = _context.sent;\n\n                      page_token = result_json.nextPageToken;\n                      if (page_token) {\n                        finished = true;\n                      }\n                      regex = new RegExp('' + filter, 'i');\n\n                      filtered_videos = [].concat(_toConsumableArray(filtered_videos), _toConsumableArray(result_json.items.filter(function (v) {\n                        return regex.test(v.snippet.title);\n                      })));\n\n                    case 13:\n                    case 'end':\n                      return _context.stop();\n                  }\n                }\n              }, _loop, undefined);\n            });\n\n          case 6:\n            if (!(!finished && filtered_videos.length < 1000)) {\n              _context2.next = 13;\n              break;\n            }\n\n            return _context2.delegateYield(_loop(), 't0', 8);\n\n          case 8:\n            _ret = _context2.t0;\n\n            if (!((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\")) {\n              _context2.next = 11;\n              break;\n            }\n\n            return _context2.abrupt('return', _ret.v);\n\n          case 11:\n            _context2.next = 6;\n            break;\n\n          case 13:\n            return _context2.abrupt('return', Promise.resolve(filtered_videos));\n\n          case 14:\n          case 'end':\n            return _context2.stop();\n        }\n      }\n    }, _callee, undefined);\n  }));\n\n  return function youTubeFetchFiltered(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexports.default = youTubeFetchFiltered;"]},"metadata":{},"sourceType":"script"}